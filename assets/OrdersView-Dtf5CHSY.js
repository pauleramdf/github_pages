import{b as Ie,V as Pe,a as Be,u as Te,f as $e,c as we,s as Ee,m as Le,d as Q,e as Oe,g as Re}from"./VDataTable-CAAXiBGS.js";import{v as y,E as A,e as b,z as He,w as U,H as V,I as Y,J as v,b as i,M as ae,o as oe,N as O,L as k,O as G,P as se,F as q,Q as Me,p as R,m as F,j as Ne,k as le,g as H,n as ie,t as I,s as p,R as Xe,A as Ye,u as M,f as z,S as J,U as ue,V as pe,W as ze,D as j,r as Ae,B as Fe,X as We,Y as re,l as Ge,Z as je,_ as De,$ as ce,a0 as Ue,a1 as qe,a2 as Je,y as Ke,a3 as Z}from"./index-CbmG5sny.js";import{V as X}from"./VCard-DVxP3NUx.js";import{V as Qe,b as P,d as Ze,c as et,m as tt,e as nt,f as at,g as ot,u as st}from"./scopeId-C1qs1wy0.js";import{i as lt,j as w,a as it,b as ut,c as rt,m as W,d as de,u as ct,e as dt,f as ft,k as vt,l as mt,n as ht,M as gt}from"./index-CWKZetSd.js";const yt="https://lanchoneteapi-production.up.railway.app",ee=`${yt}/orders`,fe=()=>{const{fetchBase:e}=Ie(),n=y([]),t=y(0),a=y(!1),o=y(20),u=y(!1);async function s(r,l="",d=o.value,m=["createdAt","desc"]){a.value=!0;try{const f=await e(`${ee}/all?page=${r}&size=${d}${l}`,"GET",void 0);return t.value=f.totalPages,n.value=f.content,null}catch{return null}finally{a.value=!1}}async function c(r){u.value=!0;try{const l=JSON.stringify(r);return(await e(`${ee}/total_batch`,"POST",void 0,l)).data}catch{return null}finally{u.value=!1}}return{data:n,refresh:s,pending:a,totalPages:t,pageSize:o,create:c,pendingCreate:u}},bt=A({__name:"OrdersList",props:{tab:{}},setup(e){const{data:n,refresh:t,pageSize:a}=fe(),o=y(""),u=y(0),s=e,c=y([{align:"start",key:"name",sortable:!1,title:"Orders"},{key:"totalPrice",title:"Total Price"},{key:"qntItems",title:"Items"},{key:"status",title:"Status"},{key:"updatedAt",title:"Updated at"}]),r=b(()=>n.value?n.value.map(d=>{var m;return{name:d.id,totalPrice:d.totalPrice,qntItems:((m=d.items)==null?void 0:m.length)||0,status:d.status,updatedAt:d.updatedAt}}):[]),l=()=>{s.tab==0&&t(u.value)};return He(()=>{t(u.value)}),U(()=>s.tab,l),(d,m)=>(V(),Y(X,{title:"Orders",flat:""},{text:v(()=>[i(Pe,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=f=>o.value=f),label:"Search","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":""},null,8,["modelValue"])]),default:v(()=>[i(Be,{headers:c.value,items:r.value,search:o.value,"items-per-page":ae(a)},null,8,["headers","items","search","items-per-page"])]),_:1}))}}),Ct={key:1},_t={key:0,class:"pa-3"},St=A({__name:"ListItem",props:{item:{},pendingCreate:{type:Boolean}},emits:["getItem"],setup(e,{emit:n}){const t=y(0),a=y([]),o=e,u=n;function s(){a.value.forEach(l=>{o.item.name==l.name&&(t.value=l.quantity)}),t.value!=0&&u("getItem",{name:o.item.name,counter:t.value,price:o.item.price,productId:o.item.id})}function c(){t.value++,u("getItem",{name:o.item.name,counter:t.value,price:o.item.price,productId:o.item.id})}function r(){t.value>0&&t.value--,u("getItem",{name:o.item.name,counter:t.value,price:o.item.price,productId:o.item.id})}return oe(()=>{s()}),U(()=>o.pendingCreate,()=>{o.pendingCreate&&(a.value=[],t.value=0)}),(l,d)=>(V(),O(q,null,[i(Ze,null,{default:v(()=>[(V(),Y(Qe,{class:"px-5",key:l.item.name,title:l.item.name,subtitle:`Price: R$ ${l.item.price.toFixed(2)}`},{prepend:v(()=>[i(lt,{color:"grey"},{default:v(()=>[i(w,{color:"white"},{default:v(()=>[k(" mdi mdi-hamburger ")]),_:1})]),_:1})]),append:v(()=>[t.value==0?(V(),Y(P,{key:0,color:"red",icon:"",onClick:c},{default:v(()=>[i(w,{small:""},{default:v(()=>[k("mdi-plus-circle")]),_:1})]),_:1})):(V(),O("div",Ct,[i(P,{color:"red",icon:"",onClick:r},{default:v(()=>[i(w,{small:""},{default:v(()=>[k(" mdi mdi-minus-circle ")]),_:1})]),_:1}),t.value!=0?(V(),O("span",_t,G(t.value),1)):se("",!0),i(P,{color:"green",icon:"",onClick:c},{default:v(()=>[i(w,{small:""},{default:v(()=>[k("mdi-plus-circle")]),_:1})]),_:1})]))]),_:1},8,["title","subtitle"]))]),_:1}),i(et)],64))}}),kt=A({__name:"NewOrder",props:{pendingCreate:{type:Boolean}},emits:["getItem"],setup(e,{emit:n}){const{refresh:t,data:a}=Te(),o=y(0),u=y(0),s=y([]),c=n,r=e,l=f=>{const C=s.value.findIndex(h=>h.name==f.name);C==-1?s.value.push(f):f.counter==0?s.value.splice(C,1):s.value[C].counter=f.counter,d()},d=()=>{let f=0,C=0;s.value.forEach(h=>{f+=h.price*h.counter,C+=h.counter}),o.value=C,u.value=f,c("getItem",{items:o,prices:u,order:s})},m=b(()=>a.value);return oe(()=>{t(0)}),(f,C)=>(V(!0),O(q,null,Me(m.value,(h,B)=>(V(),O("div",{key:B},[i(St,{item:h,pendingCreate:r.pendingCreate,onGetItem:l},null,8,["item","pendingCreate"])]))),128))}}),Vt=R({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...it(),...F(),...ut(),...Ne(),...rt(),...W({tag:"footer"}),...le()},"VFooter"),xt=H()({name:"VFooter",props:Vt(),setup(e,n){let{slots:t}=n;const{themeClasses:a}=ie(e),{backgroundColorClasses:o,backgroundColorStyles:u}=de(I(e,"color")),{borderClasses:s}=ct(e),{elevationClasses:c}=dt(e),{roundedClasses:r}=ft(e),l=p(32),{resizeRef:d}=Xe(C=>{C.length&&(l.value=C[0].target.clientHeight)}),m=b(()=>e.height==="auto"?l.value:parseInt(e.height,10)),{layoutItemStyles:f}=Ye({id:e.name,order:b(()=>parseInt(e.order,10)),position:b(()=>"bottom"),layoutSize:m,elementSize:b(()=>e.height==="auto"?void 0:m.value),active:b(()=>e.app),absolute:I(e,"absolute")});return M(()=>i(e.tag,{ref:d,class:["v-footer",a.value,o.value,s.value,c.value,r.value,e.class],style:[u.value,e.app?f.value:{height:z(e.height)},e.style]},t)),{}}}),ve=J.reduce((e,n)=>(e[n]={type:[Boolean,String,Number],default:!1},e),{}),me=J.reduce((e,n)=>{const t="offset"+ue(n);return e[t]={type:[String,Number],default:null},e},{}),he=J.reduce((e,n)=>{const t="order"+ue(n);return e[t]={type:[String,Number],default:null},e},{}),te={col:Object.keys(ve),offset:Object.keys(me),order:Object.keys(he)};function It(e,n,t){let a=e;if(!(t==null||t===!1)){if(n){const o=n.replace(e,"");a+=`-${o}`}return e==="col"&&(a="v-"+a),e==="col"&&(t===""||t===!0)||(a+=`-${t}`),a.toLowerCase()}}const Pt=["auto","start","end","center","baseline","stretch"],Bt=R({cols:{type:[Boolean,String,Number],default:!1},...ve,offset:{type:[String,Number],default:null},...me,order:{type:[String,Number],default:null},...he,alignSelf:{type:String,default:null,validator:e=>Pt.includes(e)},...F(),...W()},"VCol"),Tt=H()({name:"VCol",props:Bt(),setup(e,n){let{slots:t}=n;const a=b(()=>{const o=[];let u;for(u in te)te[u].forEach(c=>{const r=e[c],l=It(u,c,r);l&&o.push(l)});const s=o.some(c=>c.startsWith("v-col-"));return o.push({"v-col":!s||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),o});return()=>{var o;return pe(e.tag,{class:[a.value,e.class],style:e.style},(o=t.default)==null?void 0:o.call(t))}}}),ge=Symbol.for("vuetify:v-tabs"),$t=R({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...ze(tt({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),D=H()({name:"VTab",props:$t(),setup(e,n){let{slots:t,attrs:a}=n;const{textColorClasses:o,textColorStyles:u}=vt(e,"sliderColor"),s=y(),c=y(),r=b(()=>e.direction==="horizontal"),l=b(()=>{var m,f;return((f=(m=s.value)==null?void 0:m.group)==null?void 0:f.isSelected.value)??!1});function d(m){var C,h;let{value:f}=m;if(f){const B=(h=(C=s.value)==null?void 0:C.$el.parentElement)==null?void 0:h.querySelector(".v-tab--selected .v-tab__slider"),E=c.value;if(!B||!E)return;const N=getComputedStyle(B).color,T=B.getBoundingClientRect(),$=E.getBoundingClientRect(),g=r.value?"x":"y",_=r.value?"X":"Y",S=r.value?"right":"bottom",x=r.value?"width":"height",_e=T[g],Se=$[g],L=_e>Se?T[S]-$[S]:T[g]-$[g],ke=Math.sign(L)>0?r.value?"right":"bottom":Math.sign(L)<0?r.value?"left":"top":"center",Ve=(Math.abs(L)+(Math.sign(L)<0?T[x]:$[x]))/Math.max(T[x],$[x])||0,xe=T[x]/$[x]||0,K=1.5;we(E,{backgroundColor:[N,"currentcolor"],transform:[`translate${_}(${L}px) scale${_}(${xe})`,`translate${_}(${L/K}px) scale${_}(${(Ve-1)/K+1})`,"none"],transformOrigin:Array(3).fill(ke)},{duration:225,easing:Ee})}}return M(()=>{const m=P.filterProps(e);return i(P,j({symbol:ge,ref:s,class:["v-tab",e.class],style:e.style,tabindex:l.value?0:-1,role:"tab","aria-selected":String(l.value),active:!1},m,a,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":d}),{...t,default:()=>{var f;return i(q,null,[((f=t.default)==null?void 0:f.call(t))??e.text,!e.hideSlider&&i("div",{ref:c,class:["v-tab__slider",o.value],style:u.value},null)])}})}),$e({},s)}});function wt(e){return e?e.map(n=>We(n)?n:{text:n,value:n}):[]}const Et=R({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Le({mandatory:"force"}),...mt(),...W()},"VTabs"),Lt=H()({name:"VTabs",props:Et(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:t}=n;const a=Ae(e,"modelValue"),o=b(()=>wt(e.items)),{densityClasses:u}=ht(e),{backgroundColorClasses:s,backgroundColorStyles:c}=de(I(e,"bgColor"));return Fe({VTab:{color:I(e,"color"),direction:I(e,"direction"),stacked:I(e,"stacked"),fixed:I(e,"fixedTabs"),sliderColor:I(e,"sliderColor"),hideSlider:I(e,"hideSlider")}}),M(()=>{const r=Q.filterProps(e);return i(Q,j(r,{modelValue:a.value,"onUpdate:modelValue":l=>a.value=l,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},u.value,s.value,e.class],style:[{"--v-tabs-height":z(e.height)},c.value,e.style],role:"tablist",symbol:ge}),{default:()=>[t.default?t.default():o.value.map(l=>i(D,j(l,{key:l.text}),null))]})}),{}}}),Ot=e=>{const{touchstartX:n,touchendX:t,touchstartY:a,touchendY:o}=e,u=.5,s=16;e.offsetX=t-n,e.offsetY=o-a,Math.abs(e.offsetY)<u*Math.abs(e.offsetX)&&(e.left&&t<n-s&&e.left(e),e.right&&t>n+s&&e.right(e)),Math.abs(e.offsetX)<u*Math.abs(e.offsetY)&&(e.up&&o<a-s&&e.up(e),e.down&&o>a+s&&e.down(e))};function Rt(e,n){var a;const t=e.changedTouches[0];n.touchstartX=t.clientX,n.touchstartY=t.clientY,(a=n.start)==null||a.call(n,{originalEvent:e,...n})}function Ht(e,n){var a;const t=e.changedTouches[0];n.touchendX=t.clientX,n.touchendY=t.clientY,(a=n.end)==null||a.call(n,{originalEvent:e,...n}),Ot(n)}function Mt(e,n){var a;const t=e.changedTouches[0];n.touchmoveX=t.clientX,n.touchmoveY=t.clientY,(a=n.move)==null||a.call(n,{originalEvent:e,...n})}function Nt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:t=>Rt(t,n),touchend:t=>Ht(t,n),touchmove:t=>Mt(t,n)}}function Xt(e,n){var c;const t=n.value,a=t!=null&&t.parent?e.parentElement:e,o=(t==null?void 0:t.options)??{passive:!0},u=(c=n.instance)==null?void 0:c.$.uid;if(!a||!u)return;const s=Nt(n.value);a._touchHandlers=a._touchHandlers??Object.create(null),a._touchHandlers[u]=s,re(s).forEach(r=>{a.addEventListener(r,s[r],o)})}function Yt(e,n){var u,s;const t=(u=n.value)!=null&&u.parent?e.parentElement:e,a=(s=n.instance)==null?void 0:s.$.uid;if(!(t!=null&&t._touchHandlers)||!a)return;const o=t._touchHandlers[a];re(o).forEach(c=>{t.removeEventListener(c,o[c])}),delete t._touchHandlers[a]}const ye={mounted:Xt,unmounted:Yt},pt=ye,be=Symbol.for("vuetify:v-window"),Ce=Symbol.for("vuetify:v-window-group"),zt=R({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...F(),...W(),...le()},"VWindow"),At=H()({name:"VWindow",directives:{Touch:ye},props:zt(),emits:{"update:modelValue":e=>!0},setup(e,n){let{slots:t}=n;const{themeClasses:a}=ie(e),{isRtl:o}=Ge(),{t:u}=je(),s=nt(e,Ce),c=y(),r=b(()=>o.value?!e.reverse:e.reverse),l=p(!1),d=b(()=>{const g=e.direction==="vertical"?"y":"x",S=(r.value?!l.value:l.value)?"-reverse":"";return`v-window-${g}${S}-transition`}),m=p(0),f=y(void 0),C=b(()=>s.items.value.findIndex(g=>s.selected.value.includes(g.id)));U(C,(g,_)=>{const S=s.items.value.length,x=S-1;S<=2?l.value=g<_:g===x&&_===0?l.value=!0:g===0&&_===x?l.value=!1:l.value=g<_}),De(be,{transition:d,isReversed:l,transitionCount:m,transitionHeight:f,rootRef:c});const h=b(()=>e.continuous||C.value!==0),B=b(()=>e.continuous||C.value!==s.items.value.length-1);function E(){h.value&&s.prev()}function N(){B.value&&s.next()}const T=b(()=>{const g=[],_={icon:o.value?e.nextIcon:e.prevIcon,class:`v-window__${r.value?"right":"left"}`,onClick:s.prev,"aria-label":u("$vuetify.carousel.prev")};g.push(h.value?t.prev?t.prev({props:_}):i(P,_,null):i("div",null,null));const S={icon:o.value?e.prevIcon:e.nextIcon,class:`v-window__${r.value?"left":"right"}`,onClick:s.next,"aria-label":u("$vuetify.carousel.next")};return g.push(B.value?t.next?t.next({props:S}):i(P,S,null):i("div",null,null)),g}),$=b(()=>e.touch===!1?e.touch:{...{left:()=>{r.value?E():N()},right:()=>{r.value?N():E()},start:_=>{let{originalEvent:S}=_;S.stopPropagation()}},...e.touch===!0?{}:e.touch});return M(()=>ce(i(e.tag,{ref:c,class:["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover"},a.value,e.class],style:e.style},{default:()=>{var g,_;return[i("div",{class:"v-window__container",style:{height:f.value}},[(g=t.default)==null?void 0:g.call(t,{group:s}),e.showArrows!==!1&&i("div",{class:"v-window__controls"},[T.value])]),(_=t.additional)==null?void 0:_.call(t,{group:s})]}}),[[Ue("touch"),$.value]])),{group:s}}}),Ft=R({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...F(),...at(),...Oe()},"VWindowItem"),ne=H()({name:"VWindowItem",directives:{Touch:pt},props:Ft(),emits:{"group:selected":e=>!0},setup(e,n){let{slots:t}=n;const a=qe(be),o=ot(e,Ce),{isBooted:u}=st();if(!a||!o)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const s=p(!1),c=b(()=>u.value&&(a.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function r(){!s.value||!a||(s.value=!1,a.transitionCount.value>0&&(a.transitionCount.value-=1,a.transitionCount.value===0&&(a.transitionHeight.value=void 0)))}function l(){var h;s.value||!a||(s.value=!0,a.transitionCount.value===0&&(a.transitionHeight.value=z((h=a.rootRef.value)==null?void 0:h.clientHeight)),a.transitionCount.value+=1)}function d(){r()}function m(h){s.value&&Ke(()=>{!c.value||!s.value||!a||(a.transitionHeight.value=z(h.clientHeight))})}const f=b(()=>{const h=a.isReversed.value?e.reverseTransition:e.transition;return c.value?{name:typeof h!="string"?a.transition.value:h,onBeforeEnter:l,onAfterEnter:r,onEnterCancelled:d,onBeforeLeave:l,onAfterLeave:r,onLeaveCancelled:d,onEnter:m}:!1}),{hasContent:C}=Re(e,o.isSelected);return M(()=>i(gt,{transition:f.value,disabled:!u.value},{default:()=>{var h;return[ce(i("div",{class:["v-window-item",o.selectedClass.value,e.class],style:e.style},[C.value&&((h=t.default)==null?void 0:h.call(t))]),[[Je,o.isSelected.value]])]}})),{groupItem:o}}}),Wt={class:"font-weight-bold text-h6"},Gt={class:"font-weight-bold text-h6 mr-3"},Qt=A({__name:"OrdersView",setup(e){const{create:n,pendingCreate:t}=fe(),a=y(0),o=y(0),u=y(0),s=y([]),c=({items:l,prices:d,order:m})=>{console.log("Updating cart"),o.value=l.value,u.value=d.value,s.value=m.value},r=async()=>{const l={};l.orderId=null,l.products=s.value.filter(d=>d.counter>0).map(d=>({productId:d.productId,quantity:d.counter})),await n(l),s.value=[],o.value=0,u.value=0};return(l,d)=>(V(),O("div",null,[i(X,{class:"v-layout--full-height"},{default:v(()=>[i(Lt,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=m=>a.value=m),"align-tabs":"center",stacked:""},{default:v(()=>[i(D,{value:"0"},{default:v(()=>[i(w,null,{default:v(()=>[k("mdi-invoice-text-multiple-outline")]),_:1}),k(" Orders History ")]),_:1}),i(D,{value:"1"},{default:v(()=>[i(w,null,{default:v(()=>[k("mdi-invoice-text-plus-outline")]),_:1}),k(" New Order ")]),_:1})]),_:1},8,["modelValue"]),i(At,{class:"full-height",modelValue:a.value,"onUpdate:modelValue":d[1]||(d[1]=m=>a.value=m)},{default:v(()=>[i(ne,{class:"full-height",value:1},{default:v(()=>[k("> "),i(X,null,{default:v(()=>[i(bt,{tab:a.value},null,8,["tab"])]),_:1})]),_:1}),i(ne,{class:"full-height",value:2},{default:v(()=>[k("> "),i(X,null,{default:v(()=>[i(kt,{pendingCreate:ae(t),onGetItem:c},null,8,["pendingCreate"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),o.value!=0?(V(),Y(xt,{key:0,app:"",absolute:""},{default:v(()=>[i(Tt,{class:"text-center",cols:"12"},{default:v(()=>[i(P,{color:"green"},{default:v(()=>[Z("span",Wt," Items: "+G(o.value),1)]),_:1}),i(P,{color:"red",onClick:r},{default:v(()=>[i(w,{class:"mr-3"},{default:v(()=>[k("mdi mdi-shopping")]),_:1}),Z("span",Gt," R$: "+G(u.value.toFixed(2)),1),k(" Buy Now ")]),_:1})]),_:1})]),_:1})):se("",!0)]))}});export{Qt as default};
